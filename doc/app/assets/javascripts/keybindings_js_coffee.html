<!DOCTYPE html>

<html>
<head>
<meta charset="UTF-8">

<title>keybindings.js.coffee - RDoc Documentation</title>

<link href="../../../fonts.css" rel="stylesheet">
<link href="../../../rdoc.css" rel="stylesheet">

<script type="text/javascript">
  var rdoc_rel_prefix = "../../../";
</script>

<script src="../../../js/jquery.js"></script>
<script src="../../../js/navigation.js"></script>
<script src="../../../js/search_index.js"></script>
<script src="../../../js/search.js"></script>
<script src="../../../js/searcher.js"></script>
<script src="../../../js/darkfish.js"></script>


<body id="top" role="document" class="file">
<nav role="navigation">
  <div id="project-navigation">
    <div id="home-section" role="region" title="Quick navigation" class="nav-section">
  <h2>
    <a href="../../../index.html" rel="home">Home</a>
  </h2>

  <div id="table-of-contents-navigation">
    <a href="../../../table_of_contents.html#pages">Pages</a>
    <a href="../../../table_of_contents.html#classes">Classes</a>
    <a href="../../../table_of_contents.html#methods">Methods</a>
  </div>
</div>

    <div id="search-section" role="search" class="project-section initially-hidden">
  <form action="#" method="get" accept-charset="utf-8">
    <div id="search-field-wrapper">
      <input id="search-field" role="combobox" aria-label="Search"
             aria-autocomplete="list" aria-controls="search-results"
             type="text" name="search" placeholder="Search" spellcheck="false"
             title="Type to search, Up and Down to navigate, Enter to load">
    </div>

    <ul id="search-results" aria-label="Search Results"
        aria-busy="false" aria-expanded="false"
        aria-atomic="false" class="initially-hidden"></ul>
  </form>
</div>

  </div>

  

  <div id="project-metadata">
    <div id="fileindex-section" class="nav-section">
  <h3>Pages</h3>

  <ul class="link-list">
  
    <li><a href="../../../Gemfile.html">Gemfile</a>
  
    <li><a href="../../../Gemfile_lock.html">Gemfile.lock</a>
  
    <li><a href="../../../README_rdoc.html">README</a>
  
    <li><a href="../../../Rakefile.html">Rakefile</a>
  
    <li><a href="../../../app/assets/javascripts/JsonModels_js.html">JsonModels.js</a>
  
    <li><a href="../../../app/assets/javascripts/application_js.html">application.js</a>
  
    <li><a href="../../../app/assets/javascripts/documents_provisories_js_coffee.html">documents_provisories.js.coffee</a>
  
    <li><a href="../../../app/assets/javascripts/employments_js.html">employments.js</a>
  
    <li><a href="../../../app/assets/javascripts/folders_js.html">folders.js</a>
  
    <li><a href="../../../app/assets/javascripts/jsonModels_js.html">jsonModels.js</a>
  
    <li><a href="../../../app/assets/javascripts/keybindings_js_coffee.html">keybindings.js.coffee</a>
  
    <li><a href="../../../app/assets/javascripts/people_js.html">people.js</a>
  
    <li><a href="../../../app/assets/javascripts/utils_js.html">utils.js</a>
  
    <li><a href="../../../app/assets/stylesheets/application_css.html">application.css</a>
  
    <li><a href="../../../app/assets/stylesheets/application_css_scss.html">application.css.scss</a>
  
    <li><a href="../../../app/assets/stylesheets/dependencies_css_scss.html">dependencies.css.scss</a>
  
    <li><a href="../../../app/assets/stylesheets/documents_css_scss.html">documents.css.scss</a>
  
    <li><a href="../../../app/assets/stylesheets/documents_provisories_css_scss.html">documents_provisories.css.scss</a>
  
    <li><a href="../../../app/assets/stylesheets/employments_css_scss.html">employments.css.scss</a>
  
    <li><a href="../../../app/assets/stylesheets/entities_css_scss.html">entities.css.scss</a>
  
    <li><a href="../../../app/assets/stylesheets/folders_css_scss.html">folders.css.scss</a>
  
    <li><a href="../../../app/assets/stylesheets/header_css_scss.html">header.css.scss</a>
  
    <li><a href="../../../app/assets/stylesheets/master_units_css_scss.html">master_units.css.scss</a>
  
    <li><a href="../../../app/assets/stylesheets/notes_css_scss.html">notes.css.scss</a>
  
    <li><a href="../../../app/assets/stylesheets/people_css_scss.html">people.css.scss</a>
  
    <li><a href="../../../app/assets/stylesheets/scaffolds_css_scss.html">scaffolds.css.scss</a>
  
    <li><a href="../../../app/assets/stylesheets/welcome_css_scss.html">welcome.css.scss</a>
  
    <li><a href="../../../app/views/application/_sub_header_html_haml.html">_sub_header.html.haml</a>
  
    <li><a href="../../../app/views/dependencies/_form_html_haml.html">_form.html.haml</a>
  
    <li><a href="../../../app/views/dependencies/_sub_header_html_haml.html">_sub_header.html.haml</a>
  
    <li><a href="../../../app/views/dependencies/edit_html_haml.html">edit.html.haml</a>
  
    <li><a href="../../../app/views/dependencies/index_html_haml.html">index.html.haml</a>
  
    <li><a href="../../../app/views/dependencies/new_html_haml.html">new.html.haml</a>
  
    <li><a href="../../../app/views/dependencies/show_html_haml.html">show.html.haml</a>
  
    <li><a href="../../../app/views/devise/sessions/new_html_haml.html">new.html.haml</a>
  
    <li><a href="../../../app/views/documents/show_html_haml.html">show.html.haml</a>
  
    <li><a href="../../../app/views/employments/_form_html_haml.html">_form.html.haml</a>
  
    <li><a href="../../../app/views/employments/_sub_header_html_haml.html">_sub_header.html.haml</a>
  
    <li><a href="../../../app/views/employments/edit_html_haml.html">edit.html.haml</a>
  
    <li><a href="../../../app/views/employments/index_html_haml.html">index.html.haml</a>
  
    <li><a href="../../../app/views/employments/new_html_haml.html">new.html.haml</a>
  
    <li><a href="../../../app/views/employments/show_html_haml.html">show.html.haml</a>
  
    <li><a href="../../../app/views/entities/_remote_form_html_haml.html">_remote_form.html.haml</a>
  
    <li><a href="../../../app/views/folders/_form_html_haml.html">_form.html.haml</a>
  
    <li><a href="../../../app/views/folders/_new_html_haml.html">_new.html.haml</a>
  
    <li><a href="../../../app/views/folders/_remove_html_haml.html">_remove.html.haml</a>
  
    <li><a href="../../../app/views/folders/_sub_header_html_haml.html">_sub_header.html.haml</a>
  
    <li><a href="../../../app/views/folders/edit_html_haml.html">edit.html.haml</a>
  
    <li><a href="../../../app/views/folders/index_html_haml.html">index.html.haml</a>
  
    <li><a href="../../../app/views/folders/new_html_haml.html">new.html.haml</a>
  
    <li><a href="../../../app/views/folders/show_html_haml.html">show.html.haml</a>
  
    <li><a href="../../../app/views/landing/index_html_haml.html">index.html.haml</a>
  
    <li><a href="../../../app/views/layouts/_header_html_haml.html">_header.html.haml</a>
  
    <li><a href="../../../app/views/layouts/application_html_haml.html">application.html.haml</a>
  
    <li><a href="../../../app/views/layouts/welcome_html_haml.html">welcome.html.haml</a>
  
    <li><a href="../../../app/views/master_units/_form_html_haml.html">_form.html.haml</a>
  
    <li><a href="../../../app/views/master_units/_sub_header_html_haml.html">_sub_header.html.haml</a>
  
    <li><a href="../../../app/views/master_units/edit_html_haml.html">edit.html.haml</a>
  
    <li><a href="../../../app/views/master_units/index_html_haml.html">index.html.haml</a>
  
    <li><a href="../../../app/views/master_units/new_html_haml.html">new.html.haml</a>
  
    <li><a href="../../../app/views/master_units/show_html_haml.html">show.html.haml</a>
  
    <li><a href="../../../app/views/notes/_form_html_haml.html">_form.html.haml</a>
  
    <li><a href="../../../app/views/notes/_sub_header_html_haml.html">_sub_header.html.haml</a>
  
    <li><a href="../../../app/views/notes/edit_html_haml.html">edit.html.haml</a>
  
    <li><a href="../../../app/views/notes/index_html_haml.html">index.html.haml</a>
  
    <li><a href="../../../app/views/notes/new_html_haml.html">new.html.haml</a>
  
    <li><a href="../../../app/views/notes/show_html_haml.html">show.html.haml</a>
  
    <li><a href="../../../app/views/people/_form_html_haml.html">_form.html.haml</a>
  
    <li><a href="../../../app/views/people/_form_employments_html_haml.html">_form_employments.html.haml</a>
  
    <li><a href="../../../app/views/people/_sub_header_html_haml.html">_sub_header.html.haml</a>
  
    <li><a href="../../../app/views/people/edit_html_haml.html">edit.html.haml</a>
  
    <li><a href="../../../app/views/people/index_html_haml.html">index.html.haml</a>
  
    <li><a href="../../../app/views/people/new_html_haml.html">new.html.haml</a>
  
    <li><a href="../../../app/views/people/show_html_haml.html">show.html.haml</a>
  
    <li><a href="../../../app/views/users/edit_html_haml.html">edit.html.haml</a>
  
    <li><a href="../../../config_ru.html">config.ru</a>
  
    <li><a href="../../../log/development_log.html">development.log</a>
  
    <li><a href="../../../public/404_html.html">404.html</a>
  
    <li><a href="../../../public/422_html.html">422.html</a>
  
    <li><a href="../../../public/500_html.html">500.html</a>
  
    <li><a href="../../../public/datatables/spanish_txt.html">spanish</a>
  
    <li><a href="../../../public/favicon_ico.html">favicon.ico</a>
  
    <li><a href="../../../public/robots_txt.html">robots</a>
  
    <li><a href="../../../vendor/assets/javascripts/jquery_fancytree-all_js.html">jquery.fancytree-all.js</a>
  
    <li><a href="../../../vendor/assets/javascripts/jquery_fancytree-all_min_js.html">jquery.fancytree-all.min.js</a>
  
    <li><a href="../../../vendor/assets/javascripts/jquery_fancytree_dnd_js.html">jquery.fancytree.dnd.js</a>
  
    <li><a href="../../../vendor/assets/javascripts/jquery_fancytree_edit_js.html">jquery.fancytree.edit.js</a>
  
    <li><a href="../../../vendor/assets/javascripts/jquery_fancytree_js.html">jquery.fancytree.js</a>
  
    <li><a href="../../../vendor/assets/javascripts/jquery_fancytree_min_js.html">jquery.fancytree.min.js</a>
  
    <li><a href="../../../vendor/assets/javascripts/jquery_tokeninput_js.html">jquery.tokeninput.js</a>
  
    <li><a href="../../../vendor/assets/javascripts/jquery_tokeninput_min_js.html">jquery.tokeninput.min.js</a>
  
    <li><a href="../../../vendor/assets/stylesheets/fancytree/ui_fancytree_css.html">ui.fancytree.css</a>
  
    <li><a href="../../../vendor/assets/stylesheets/token-input-facebook_css.html">token-input-facebook.css</a>
  
    <li><a href="../../../vendor/assets/stylesheets/token-input-mac_css.html">token-input-mac.css</a>
  
    <li><a href="../../../vendor/assets/stylesheets/token-input_css.html">token-input.css</a>
  
  </ul>
</div>

  </div>
</nav>

<main role="main" aria-label="Page app/assets/javascripts/keybindings.js.coffee">

<p>$ -&gt;</p>

<pre>handleKeyBindings()</pre>

<p>$(document).on &#39;page:change&#39;, -&gt;</p>

<pre>handleKeyBindings()</pre>

<p>handleKeyBindings = -&gt;</p>

<pre># As turbolinks does not refresh the page, some old keybindings could be still present. Therefore a reset is required.
Mousetrap.reset()

# Hotkey binding to links with &#39;data-keybinding&#39; attribute
# Navigate link when hotkey pressed
$(&#39;a[data-keybinding]&#39;).each (i, el) -&gt;
  bindedKey = $(el).data(&#39;keybinding&#39;)
  bindedKey = bindedKey.toString() if typeof(bindedKey) == &#39;number&#39;
  Mousetrap.bind bindedKey, (e) -&gt;
    if typeof(Turbolinks) == &#39;undefined&#39;
      # Emulate click if turbolinks defined
      el.click()
    else
      # Use turbolinks to go to URL
      Turbolinks.visit(el.href)

# Hotkey binding to inputs with &#39;data-keybinding&#39; attribute
# Focus input when hotkey pressed
$(&#39;input[data-keybinding]&#39;).each (i, el) -&gt;
  Mousetrap.bind $(el).data(&#39;keybinding&#39;), (e) -&gt;
    el.focus()
    if e.preventDefault
      e.preventDefault()
    else
      e.returnValue = false

# Toggle show/hide hotkey hints
window.mouseTrapRails =
  showOnLoad: false           # Show/hide hotkey hints by default (on page load). Mostly for debugging purposes.
  toggleKeys: &#39;alt+shift+h&#39;   # Keys combo to toggle hints visibility.
  keysShown: false            # State of hotkey hints
  toggleHints:  -&gt;
    $(&#39;a[data-keybinding]&#39;).each (i, el) -&gt;
      $el = $(el)
      if mouseTrapRails.keysShown
        $el.removeClass(&#39;mt-hotkey-el&#39;).find(&#39;.mt-hotkey-hint&#39;).remove()
      else
        mtKey = $el.data(&#39;keybinding&#39;)
        $hint = &quot;&lt;i class=&#39;mt-hotkey-hint&#39; title=&#39;Press \&lt;#{mtKey}\&gt; to open link&#39;&gt;#{mtKey}&lt;/i&gt;&quot;
        $el.addClass(&#39;mt-hotkey-el&#39;) unless $el.css(&#39;position&#39;) is &#39;absolute&#39;
        $el.append $hint
    @keysShown ^= true

Mousetrap.bind mouseTrapRails.toggleKeys, -&gt; mouseTrapRails.toggleHints()

mouseTrapRails.toggleHints() if mouseTrapRails.showOnLoad</pre>
</main>



<footer id="validator-badges" role="contentinfo">
  <p><a href="http://validator.w3.org/check/referer">Validate</a>
  <p>Generated by <a href="http://rdoc.rubyforge.org">RDoc</a> 4.1.2.
  <p>Based on <a href="http://deveiate.org/projects/Darkfish-Rdoc/">Darkfish</a> by <a href="http://deveiate.org">Michael Granger</a>.
</footer>

